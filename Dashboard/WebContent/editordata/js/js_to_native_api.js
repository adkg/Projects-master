function NativeAppAPI(){}var appVar=new NativeAppAPI();if(navigator.appName=="Microsoft Internet Explorer"){appVar=window.external}else{NativeAppAPI.prototype.isMac=true;appVar=window.nativeApp}if(!appVar||appVar.platform==undefined){NativeAppAPI.prototype.pushUndo_=function(a){};NativeAppAPI.prototype.displayAlert_=function(a){alert(a)};NativeAppAPI.prototype.projectName=function(){return"project_name"};NativeAppAPI.prototype.bringToFront=function(){return};NativeAppAPI.prototype.canStoreInDataBase=function(){return true};NativeAppAPI.prototype.canEnablePayments=function(){return true};NativeAppAPI.prototype.canAttachToMail=function(){return true};NativeAppAPI.prototype.resetFocus=function(){};NativeAppAPI.prototype.rescale=function(){};NativeAppAPI.prototype.getPredefinedList_=function(a){};NativeAppAPI.prototype.updateNameInSettings_=function(a){};NativeAppAPI.prototype.getBackGroundImage_=function(a){};NativeAppAPI.prototype.displayAlertEnablePayments=function(){return};NativeAppAPI.prototype.getColorboxAutoTime=function(){return 3};NativeAppAPI.prototype.validateConditionalRule_=function(a){return'{"element":{"name":"select2","operator":"is","value":"Option 1"}}'};NativeAppAPI.prototype.getApplicationLanguage=function(){return"en"};NativeAppAPI.prototype.getThemeType=function(){return"responsive"};if(navigator.appName=="Microsoft Internet Explorer"){NativeAppAPI.prototype.platform=function(){return"win"}}else{NativeAppAPI.prototype.platform=function(){return"mac"}}appVar=new NativeAppAPI()}function js_form_is_empty(){var a=true;var b=document.getElementById("column1");if((b.childNodes.length>0)||($("#docContainer").attr("captcha")==true)){a=false}return a.toString()}function js_focused(){if(fb_panel.inputFocused){return"YES"}else{return"NO"}}function js_input_text_selected(){return fb_editor.isTextSelected()}function js_isitemselected(){if(!fb_panel.inputFocused&&fb_container.itemSelected){return"YES"}else{return"NO"}}function js_isitem(a){var b=/"source":/;if(b.test(a)){return"YES"}else{return"NO"}}function js_copy(){return fb_clipboard.doCopy()}function js_cut(){return fb_clipboard.doCut()}function js_paste(a){return fb_clipboard.doPaste(a)}function js_delete(){return fb_clipboard.doDelete()}function js_undo_change(a){fb_undo.doUndo(a)}function js_redo_change(a){fb_undo.doRedo(a)}function js_get_Counters(){var a=fb_toolbox.itemsCounter;return a.toString()}function js_get_html(){fb_editor.triggerActiveElementChange();if(fb_container.itemSelected){$(fb_container.itemSelected).removeClass("selected-object")}var b=$("#docContainer").clone();var d={};var a=pValidationConfig.get_config();$.each(a,function(f,e){if(e.hasOwnProperty("html_contents")){var g="__"+f+"__";b.find("#"+f).html(g);d[g]=e.html_contents}});var c=fb_utils.getouterHtml(b.get(0),true,true);$.each(d,function(f,e){if(e.search("<script")==-1){c=c.replace(f,e)}else{c=c.replace(f,"")}});if(fb_container.itemSelected){$(fb_container.itemSelected).addClass("selected-object")}return c}function js_get_validation(){return pValidationConfig.get_json()}function js_get_validation_for_client(){return pValidationConfig.get_json_for_client()}function js_get_validation_for_server(){var a=pValidationConfig.get_json_for_server();return a}function js_get_payments_rules(){return pPaymentsConfig.get_json()}function js_get_payments_rules_for_server(){return pPaymentsConfig.get_json_for_server()}function js_get_conditional_rules_for_server(){return pValidationConfig.get_conditional_json_for_server()}function js_put_Counters(a){fb_toolbox.itemsCounter=a}function js_put_html(a){$(".ui-layout-center").html(a);fb_container.initLoaded();fb_views.form();$("#elements").trigger("click")}function js_put_validation(a){pValidationConfig.set_json(a)}function js_put_payments_rules(a){pPaymentsConfig.set_json(a)}function js_get_preview_html(){fb_editor.triggerActiveElementChange();var b=appVar.projectName();var d="<title>"+decodeURIComponent(b)+"</title>";if(fb_container.itemSelected){$(fb_container.itemSelected).removeClass("selected-object")}var c=document.getElementById("theme").getAttribute("href");var a='<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">';a+='<script type="text/javascript" src="common/js/form_init.js" id="form_init_script" data-name="" ><\/script>\n';a+='<link rel="stylesheet" type="text/css" href="'+c+'" id="theme" />\n';a+=d;a+="</head><body>";a=style_html(a);a+=get_form_html("preview",false);a+="\n</body>\n</html>";if(fb_container.itemSelected){$(fb_container.itemSelected).addClass("selected-object")}return a}function js_get_publish_body(c,a,d){fb_editor.triggerActiveElementChange();if(fb_container.itemSelected){$(fb_container.itemSelected).removeClass("selected-object")}var b=_("<!-- Start of the body content for CoffeeCup Web Form Builder -->\n");b+=get_form_html(d,c,a)+"\n";b+=_("<!-- End of the body content for CoffeeCup Web Form Builder -->\n");if(fb_container.itemSelected){$(fb_container.itemSelected).addClass("selected-object")}return b}function js_get_publish_header(c){var b=c?"":appVar.projectName()+"/";var d=document.getElementById("theme").getAttribute("href");var a=_("<!-- Start of the headers for CoffeeCup Web Form Builder -->\n");a+='<meta name="viewport" content="width=device-width, initial-scale=1.0" />\n';a+='<script type="text/javascript" src="'+b+'common/js/form_init.js" data-name="'+b+'" id="form_init_script"><\/script>\n';a+='<link rel="stylesheet" type="text/css" href="'+b+d+'" id="theme" />\n';a+=_("<!-- End of the headers for CoffeeCup Web Form Builder -->\n");return a}function js_get_publish_html(a,d){fb_editor.triggerActiveElementChange();var c=get_css_file("theme",true);var e="<title>"+decodeURIComponent(appVar.projectName())+"</title>";if(fb_container.itemSelected){$(fb_container.itemSelected).removeClass("selected-object")}var b='<!DOCTYPE HTML>\n<html>\n<head>\n<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">\n';b+=js_get_publish_header(true)+"\n";b+=e+"\n";b+="</head>\n<body>\n";b=style_html(b);b+=js_get_publish_body(true,a,d)+"\n";b+="\n</body>\n</html>";if(fb_container.itemSelected){$(fb_container.itemSelected).addClass("selected-object")}return b}function js_get_embedded_code(a){if(fb_container.itemSelected){$(fb_container.itemSelected).removeClass("selected-object")}var e=(parseInt($("#docContainer").outerHeight(true))+30);if(appVar.platform()=="win"){e+=$(".column").children().length*5}var f=parseInt($("#docContainer").outerWidth());var c=$("#docContainer").attr("style");if(c!==undefined&&c.toLowerCase().indexOf("margin")!=-1){f=parseInt($("#docContainer").outerWidth(true))}var b="www.coffeecup.com/api/sdrive/forms/form.js";var d="<script type=\"text/javascript\">document.write(unescape(\"%3Cscript src='http\" +  (document.location.protocol == 'https:' ? 's' : '') + \"://";d+=b+"?name="+encodeURIComponent(appVar.projectName());d+="%26slug="+a;if(appVar.getThemeType()!="responsive"){d+="%26width="+f}d+="%26height="+e;d+="%26crossdomains=true";d+="' type='text/javascript'%3E%3C/script%3E\"));<\/script>";if(fb_container.itemSelected){$(fb_container.itemSelected).addClass("selected-object")}return d}function js_get_manual_iframe(){if(fb_container.itemSelected){$(fb_container.itemSelected).removeClass("selected-object")}var e=(parseInt($("#docContainer").outerHeight(true))+30);var g=parseInt($("#docContainer").outerWidth());var c=$("#docContainer").attr("style");if(c!==undefined&&c.toLowerCase().indexOf("margin")!=-1){g=parseInt($("#docContainer").outerWidth(true))}if(appVar.getThemeType()=="responsive"){g="100%"}if(appVar.platform()=="win"){e+=$(".column").children().length*6}var f=appVar.projectName();var a=encodeURIComponent(appVar.projectName());var d='<script type="text/javascript">document.write(unescape("%3Ciframe id=\\"fb_iframe\\" src=\\"'+a+'.php" + window.location.search + "\\"';d+=' width=\\"'+g+'\\"';d+=' height=\\"'+e+'\\"';d+='allowtransparency=\\"true\\" scrolling=\\"no\\" frameborder=\\"0\\"%3E';d+='&lt;a href=\\"'+a+'.php\\" title=\\"'+a+'\\"&gt;'+_("Check out my CoffeeCup Form")+'&lt;/a&gt;%3C/iframe%3E"));<\/script>\n';var b='<noscript><iframe width="'+g;b+='" height="'+e;b+='" style="border:none; background:transparent; overflow:hidden;" id="fb_iframe" src="'+f+"/"+f+'.html">';b+='&lt;a href="'+f+'.php" title="'+f+'"&gt;'+_("Check out my CoffeeCup Form")+"&lt;/a&gt;</iframe></noscript>";if(fb_container.itemSelected){$(fb_container.itemSelected).addClass("selected-object")}return d+style_html(b)}function js_get_colorbox_head(b){var i=appVar.getColorboxAutoTime();var g=appVar.projectName();var c=b;var d=b;if(b==""||typeof b=="undefined"){d="./"+g+"/";c="./"+g+"/"+g+".html"}var a=(parseInt($("#docContainer").outerHeight(true))+30+140);if(appVar.platform()=="win"){a+=$(".column").children().length*6}var h=parseInt($("#docContainer").outerWidth());var e=$("#docContainer").attr("style");if(e!==undefined&&e.toLowerCase().indexOf("margin")!=-1){h=parseInt($("#docContainer").outerWidth(true))}if(h<330){h=330}h+=70;var f=_("<!-- Start of the headers for CoffeeCup Web Form Builder -->\n");f+='<meta name="viewport" content="width=device-width, initial-scale=1.0" />\n';f+='<link rel="stylesheet" href="'+d+'colorbox/colorbox.css" />\n';f+='<script src="'+d+'common/libs_js/jquery-1.4.4.min.js"><\/script>\n';f+='<script src="'+d+'colorbox/jquery.colorbox.js"><\/script>\n';f+="<script>\n\tvar $fb_pop = jQuery.noConflict();\n";f+="\n\t$fb_pop(document).ready(function(){\n";if(i!=-1){f+='\t\tsetTimeout( function(){ $fb_pop.colorbox({href:"'+c+'", iframe:true, innerWidth:"'+h+'px", height:"80%", maxHeight:"'+a+'px", fixed:true}) }, '+i*1000+" );\n"}f+='\t\t$fb_pop(".fb_iframe").colorbox({iframe:true, innerWidth:"'+h+'px", height:"80%", maxHeight:"'+a+'px", fixed:true }); \n\t});\n';f+="<\/script>\n";f+=_("<!-- End of the headers for CoffeeCup Web Form Builder -->\n");return f}function js_get_colorbox_body(b){var c=appVar.projectName();var a=_("<!-- Start of the body content for CoffeeCup Web Form Builder -->\n");if(b!=""){a+="<a class='fb_iframe' href=\""+b+'">'+_("Click here")+"</a>\n"}else{a+="<a class='fb_iframe' href=\"./"+c+"/"+c+'.html">'+_("Click here")+"</a>\n"}a+=_("<!-- End of the body content for CoffeeCup Web Form Builder -->\n");return a}function js_apply_theme(c,f,b){var a=[];var e=[];var h=fb_translate.get_language();if((h!="en")&&(h!="")){$("#css_ui_fix").next().remove();$("#css_ui_fix").after('<link id="theme" rel="stylesheet" type="text/css" href="'+c+"?version="+Math.floor(Math.random()*1001)+'"/>')}else{$("#css_ui").next().remove();$("#css_ui").after('<link id="theme" rel="stylesheet" type="text/css" href="'+c+"?version="+Math.floor(Math.random()*1001)+'"/>')}if(f!=undefined&&f.length>0){a=JSON.parse(f)}if(b!=undefined&&b.length>0){e=JSON.parse(b)}pValidationConfig.set_plugins(a,e);$(".jsplugin").remove();$(".cssplugin").remove();for(var d=0;d<a.length;d++){var g=document.createElement("script");g.setAttribute("type","text/javascript");g.setAttribute("src",a[d]);g.setAttribute("class","jsplugin");document.getElementsByTagName("head")[0].appendChild(g)}for(var d=0;d<e.length;d++){$("head").append('<link rel="stylesheet" type="text/css" href="'+e[d]+'" class="cssplugin"/>')}if($("#formproperties").hasClass("current")){window.setTimeout(function(){fb_views.form()},1000)}if(($("#fb-submit-button").attr("style")!=undefined&&$("#fb-submit-button").attr("style").search("theme/")>0)||((c.search("transparent/")||c.search("blank/"))&&$("#fb-submit-button").css("background-image").toLowerCase()=="none")){$("#fb-submit-button").css("background-image","")}window.setTimeout(function(){$("#fb-submit-button").attr("data-regular",$("#fb-submit-button").css("background-image"));fb_panel.applyBackgroundHover("fb-submit-button")},1000);if($("#objectproperties").hasClass("current")){window.setTimeout(function(){if(fb_container.itemSelected){fb_container.itemSelected.trigger("mousedown")}},1000)}window.setTimeout(function(){var j=$("#docContainer").attr("style");if(appVar.getThemeType()=="responsive"){var i=$("#docContainer").css("width");if(j!=undefined&&j.toLowerCase().search("max-width")==-1&&j.toLowerCase().search("width")!=-1){$("#docContainer").css("max-width",i)}if($("#docContainer").attr("data-percentage")){$("#docContainer").css("width",$("#docContainer").attr("data-percentage")+"%")}else{$("#docContainer").css("width","")}}else{var k=$("#docContainer").css("max-width");if(k!="none"&&j!=undefined&&j.toLowerCase().search("max-width")!=-1){$("#docContainer").css("width",k);$("#docContainer").css("max-width","")}}$("#docContainer textarea, #docContainer hr").each(function(l){var n=$(this).attr("style");if(appVar.getThemeType()=="responsive"){var m=$(this).css("width");if(n!=undefined&&n.toLowerCase().search("max-width")==-1&&n.toLowerCase().search("width")!=-1){$(this).css("max-width",m);$(this).css("width","")}}else{var o=$(this).css("max-width");if(o!="none"&&n!=undefined&&n.toLowerCase().search("max-width")!=-1){$(this).css("width",o);$(this).css("max-width","")}}})},750)}function get_form_html(d,j,h){var o=$(".ui-layout-center").clone();var q=appVar.projectName();o.find(".placeholder").removeClass("placeholder");o.find(".fb-spacer-placeholder").removeClass("fb-spacer-placeholder");o.find(".fb-html-placeholder").removeClass("fb-html-placeholder");o.find("#docContainer").attr("data-form",d);if(appVar.useColorbox()){o.find("#docContainer").attr("data-colorbox","true")}if(d!="preview"){if(j&&h.length==0){o.find("#docContainer").attr("action","../"+q+".php")}else{o.find("#docContainer").attr("action",h)}o.find("#docContainer .column").prepend('<div style="display:none;" id="fb_error_report" ></div>');var s=$(".column").height()>200?200:$(".column").height();o.find("#docContainer .column").prepend('<div style="display:none; min-height:'+s+'px;" id="fb_confirm_inline" ></div>');$.each($(".fb-hint",o.find("#docContainer")),function(w,v){var t=$("*",$(v).parent());for(var u=0;u<t.length;u++){if($(t[u]).attr("data-hint")!=undefined){$(t[u]).attr("data-hint","");break}}});o.find("#fb-submit-button").attr("data-regular","");var g='<input type="hidden" name="fb_form_custom_html">';var m='<input type="hidden" name="fb_form_embedded">';var l='<input type="hidden" id="fb_js_enable" name="fb_js_enable">';var p='<input type="hidden" id="fb_url_embedded" name="fb_url_embedded">';o.find("#docContainer").append(g);o.find("#docContainer").append(m);o.find("#docContainer").append(l);o.find("#docContainer").append(p)}else{o.find("#docContainer").attr("action","")}if(d=="manual"||d=="automated"){var f=4;if(navigator.appName=="Microsoft Internet Explorer"){f=5}$.each($("#docContainer img",o),function(u,t){$(t,o).attr("src",q+"/"+$(t,o).attr("src"))});$.each($("#docContainer, #docContainer *",o),function(y,x){var w=$(x,o).attr("style");if(w&&w.search(/background-image/i)!=-1){var u=$(x,o).css("background-image");var z=u.search(/file/i);var t=u.search("common");if(t==-1){t=u.search("theme")}if(z>=0){var v=u.substr(z,t-z);u=u.replace(v,"")}u=u.substr(0,f)+q+"/"+u.substr(f,u.length);$(x,o).css("background-image",u)}})}var b=pValidationConfig.get_config_value("reCaptcha","captcha_status");var c=b=="manual"?pValidationConfig.get_config_value("reCaptcha","public_key"):"_FB_RECAPTCHA_";if(d!="preview"){if(b!="none"&&b!=""){o.find("#fb-captcha_control").get(0).innerHTML="__FB__CAPTCHA__"}else{o.find("#fb-captcha_control").remove()}}var k=pValidationConfig.get_config_id(fb_conditionals.cond_rule_name);$.each(k,function(u,t){var v=o.find("#"+u);if(v.length){v.addClass("fb_cond_applied")}});var a={};var i=pValidationConfig.get_config();$.each(i,function(u,t){if(t.hasOwnProperty("html_contents")){var v="__"+u+"__";o.find("#"+u).html(v);a[v]=t.html_contents}});var n=style_html(fb_utils.getouterHtml(o.find("#docContainer").get(0),false,true));$.each(a,function(u,t){n=n.replace(u,t)});var r=pValidationConfig.get_config_value("reCaptcha","theme");r=r.length?r:"white";var e='<script type="text/javascript">var RecaptchaOptions = { lang : \''+appVar.getApplicationLanguage()+"', theme : '"+r+'\', };<\/script><script type="text/javascript"									   src="https://www.google.com/recaptcha/api/challenge?k='+c+'">									<\/script>									<noscript>										<iframe src="https://www.google.com/recaptcha/api/noscript?k='+c+'"											height="300" width="500" style="border:none;"></iframe><br>										<textarea name="recaptcha_challenge_field" rows="3" cols="40"></textarea>										<input type="hidden" name="recaptcha_response_field" value="manual_challenge">									</noscript>';n=n.replace("__FB__CAPTCHA__",e);css_hide_conditionals="<style>#docContainer .fb_cond_applied{ display:none; }</style><noscript><style>#docContainer .fb_cond_applied{ display:inline-block; }</style></noscript>";n=css_hide_conditionals+n;return n}function get_css_file(f,d){var a=$("link[id="+f+"]").clone();var b=a.attr("href");if(d){a.attr("href",appVar.projectName()+"/"+b)}var e=$('<div style="display:none"></div>');a.appendTo(e);var c=e.html();e.remove();return c}function get_elements_names(a){return JSON.stringify(pValidationConfig.get_all_names(a))}function get_email_names(){return JSON.stringify(pValidationConfig.get_email_names())}function get_contactlist_names(){return JSON.stringify(pValidationConfig.get_contactlist_names())}function js_disable_store_in_database(){fb_panel.disableStoreInDatabase()}function js_disable_attach_to_mail(){fb_panel.disableAttachToMail()}function js_refresh_editor(){fb_panel.refreshEditor()}function js_reset_focus(a){$(a).focus();if(appVar.platform()=="win"){$("body").css("zoom","1");$("body").css("zoom","")}}function js_force_resize(){$(window).trigger("resize")}function js_reset_styles(){fb_editor.resetStyles()}function js_apply_list(a,b){fb_panel.applyPredefinedList(a,b)}function js_apply_background_image(a,c){var b=encodeURIComponent(c);if(a=="fb-submit-button"){fb_panel.applySubmitButtonBackGroundImage(a,b)}else{if(a=="fb-logo1"){fb_panel.applyLogoBackGroundImage(a,b)}else{if((a=="fb-form-header1")||(a=="fb-submit-button-div")||(a=="docContainer")){fb_panel.applyGenerealBackGroundImage(a,b)}else{fb_panel.applyImageElementSrc(a,b)}}}}function js_get_images_applied(){return decodeURIComponent(fb_utils.getAllImages().join("|"))}function js_get_mailchimp_field_type(g){var f=new Array();var e=new Array();switch(g){case"address":case"text":var b=$("input","#docContainer");for(var c=0;c<b.length;c++){if($(b[c]).get(0).id.search("text")!=-1){e.push(b[c])}}break;case"zip":var b=$(".fb-regex input","#docContainer");for(var c=0;c<b.length;c++){if(pValidationConfig.get_config_value($(b[c]).get(0).id,"regex_config").option=="ZIP Code (USA)"){e.push(b[c])}}break;case"number":var b=$("input","#docContainer");for(var c=0;c<b.length;c++){if($(b[c]).get(0).id.search("number")!=-1){e.push(b[c])}}break;case"email":var b=$("input","#docContainer");for(var c=0;c<b.length;c++){if($(b[c]).get(0).id.search("email")!=-1){e.push(b[c])}}break;case"radio":e=$("input[type=radio]","#docContainer");break;case"checkboxes":e=$("input[type=checkbox]","#docContainer");break;case"dropdown":var b=$("select","#docContainer");for(var c=0;c<b.length;c++){if(navigator.appName=="Microsoft Internet Explorer"){if(($(b[c]).get(0).id.search("select")!=-1)&&(!$(b[c]).get(0).getAttribute("multiple"))){e.push(b[c])}}else{if(($(b[c]).get(0).id.search("select")!=-1)&&($(b[c]).get(0).getAttribute("multiple")==null)){e.push(b[c])}}}break;case"date":e=$(".datepicker","#docContainer");break;case"birthday":var b=$("input, select","#docContainer");var d=$("select[multiple]","#docContainer").get();for(var c=0;c<b.length;c++){if($(b[c]).get(0).id.search("number")!=-1||$(b[c]).get(0).id.search("text")!=-1||$(b[c]).get(0).id.search("select")!=-1){e.push(b[c])}}for(var c=0;c<d.length;c++){var a=e.indexOf(d[c]);if(a!=-1){e.splice(a,1)}}break;case"phone":var b=$("input","#docContainer");for(var c=0;c<b.length;c++){if($(b[c]).get(0).id.search("tel")!=-1){e.push(b[c])}}break;case"imageurl":var b=$("input","#docContainer");for(var c=0;c<b.length;c++){if($(b[c]).get(0).id.search("url")!=-1){e.push(b[c]);continue}if($(b[c]).get(0).id.search("file")!=-1){e.push(b[c]);continue}}break;case"url":var b=$("input","#docContainer");for(var c=0;c<b.length;c++){if($(b[c]).get(0).id.search("url")!=-1){e.push(b[c]);continue}}break}$.each(e,function(j,i){var h=$(i).attr("name");if($(i).attr("type")=="checkbox"){h=h.substr(0,h.length-2)}if($.inArray(h,f)<0){f.push(h)}});return(f.join("|"))}function js_get_mailchimp_subscribe(){var b=new Array();var a=$("input[type=checkbox], input[type=radio], select","#docContainer").get();$.each(a,function(e,d){var c=$(d).attr("name");if($(d).attr("type")=="checkbox"){b.push(c.substr(0,c.length-2)+"="+$(d).attr("value"))}else{if(d.tagName.toLowerCase()=="select"){if($(d).attr("multiple")){c=c.substr(0,c.length-2)}$.each($("option",d),function(g,f){b.push(c+"="+$(f).attr("value"))})}else{b.push(c+"="+$(d).attr("value"))}}});return(b.join("|"))}function js_create_mailchimp_fields(p){var h=document.getElementById("docContainer");var q=fb_undo.getFormParams(h);var g=fb_editor.JSONParser.parse(p);var b=new Array();for(var d=0;d<g.length;d++){var s=fb_utils.createDiv("item"+ ++fb_toolbox.itemsCounter,$(this).data("class"),null,null);fb_editor.backgroundActive();$("#column1").append(s);var n="";switch(g[d].field_type){case"address":case"text":n="tool_textfield";break;case"zip":n="tool_regex";break;case"birthday":case"number":n="tool_number";break;case"email":n="tool_email";break;case"radio":n="tool_radio";break;case"dropdown":n="tool_dropdown";break;case"date":n="tool_date";break;case"phone":n="tool_phone";break;case"imageurl":n="tool_upload";break;case"url":n="tool_url";break;case"checkboxes":n="tool_checkbox";break;default:n="tool_textfield";break}$("#item"+fb_toolbox.itemsCounter).html($("#"+n).data("markup"));$("#item"+fb_toolbox.itemsCounter).addClass($("#"+n).data("class"));$("#item"+fb_toolbox.itemsCounter).mousedown(fb_editor.itemToSelectable);var m=document.getElementById("item"+fb_toolbox.itemsCounter);var f="";if(m){f=fb_toolbox.generateIds(m);fb_toolbox.assignDefaultValidation(m);fb_toolbox.generateNames(m)}if(g[d].choices.length){switch(g[d].field_type){case"dropdown":$("#"+f).children().remove();if(g[d].required){s='<option value="">'+_("Choose one")+"</option>";$("#"+f).append(s)}for(var c=0;c<g[d].choices.length;c++){s='<option value="'+g[d].choices[c]+'" >'+g[d].choices[c]+"</option>";$("#"+f).append(s)}fb_toolbox.generateIds($("#"+f).parent().parent()[0]);break;case"radio":case"checkboxes":var l=g[d].field_type=="radio"?"radio":"checkbox";var o=$("#"+f).attr("name");var k=$("#"+f).parent().parent();k.children().remove();for(var c=0;c<g[d].choices.length;c++){s='<label><input type="'+l+'" value="'+g[d].choices[c]+'" name="'+o+'"><span class="fb-fieldlabel">'+g[d].choices[c]+"</span></label>";k.append(s)}fb_toolbox.generateIds(k.parent()[0]);break}}if(g[d].required){$("#"+f).attr("required","required");pValidationConfig.set_config_type(f,"required",true)}if(g[d].field_type=="zip"){pValidationConfig.set_config_type(f,"regex_config",{option:"ZIP Code (USA)",value:pValidationConfig.reg_exp_defaults["ZIP Code (USA)"]})}if(g[d].name!=undefined){var r;if($("#"+f).attr("type").toLowerCase()=="checkbox"||$("#"+f).attr("type").toLowerCase()=="radio"){r=$("#"+f).parent().parent().parent().children().children()[0]}else{r=$("#"+f).parent().parent().children().children()[0]}$(r).html(g[d].name);if(g[d].name==""){$(r).css("display","none")}else{$(r).css("display","inline")}pValidationConfig.set_config_type(f,"label",g[d].name)}var a=$("#"+f).attr("name");if($("#"+f).attr("type")=="checkbox"){a=a.substr(0,a.length-2)}b.push({tag:g[d].tag,field_match:a})}$("#layout-center").scrollTop($("#layout-center").attr("scrollHeight"));q.markupredo=fb_utils.getouterHtml(h);var e=fb_editor.JSONParser.stringify(q);appVar.pushUndo_(e);return JSON.stringify(b)};