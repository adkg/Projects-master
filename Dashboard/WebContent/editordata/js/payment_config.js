function PaymentConfig(){this.payment_config={}}PaymentConfig.prototype.get_config_subtype=function(c,b,a){if(arguments.length!=3){return""}if(typeof this.payment_config[c]=="undefined"||this.payment_config[c]===null){return""}if(typeof this.payment_config[c][b]=="undefined"||this.payment_config[c][b]===null){return""}if(typeof this.payment_config[c][b][a]=="undefined"||this.payment_config[c][b][a]===null){return""}return fb_utils.cloneObject(this.payment_config[c][b][a])};PaymentConfig.prototype.get_config_value=function(b,a){if(arguments.length!=2){return""}if(a=="type"&&(typeof this.payment_config[b]=="undefined"||this.payment_config[b]===null||!appVar.canEnablePayments())){return"none"}if(a=="type"&&(typeof this.payment_config[b][a]=="undefined"||this.payment_config[b][a]===null||!appVar.canEnablePayments())){return"none"}if(typeof this.payment_config[b]=="undefined"||this.payment_config[b]===null){return""}if(typeof this.payment_config[b][a]=="undefined"||this.payment_config[b][a]===null){return""}return fb_utils.cloneObject(this.payment_config[b][a])};PaymentConfig.prototype.get_config_id=function(a){if(arguments.length!=1){return{}}if(typeof this.payment_config[a]=="undefined"||this.payment_config[a]===null){return{}}return fb_utils.cloneObject(this.payment_config[a])};PaymentConfig.prototype.get_config=function(){if(arguments.length!==0){return false}return fb_utils.cloneObject(this.payment_config)};PaymentConfig.prototype.set_config_subtype=function(d,b,a,c){if(arguments.length!=4){return false}if(typeof this.payment_config[d]=="undefined"||this.payment_config[d]===null){this.payment_config[d]={}}if(typeof this.payment_config[d][b]=="undefined"||this.payment_config[d][b]===null){this.payment_config[d][b]={}}this.payment_config[d][b][a]=fb_utils.cloneObject(c.toString());return true};PaymentConfig.prototype.set_config_type=function(c,a,b){if(arguments.length!=3){return false}if(b===""){this.remove_config_type(c,a);return true}if(typeof this.payment_config[c]=="undefined"||this.payment_config[c]===null){this.payment_config[c]={}}this.payment_config[c][a]=fb_utils.cloneObject(b);return true};PaymentConfig.prototype.set_config_id=function(b,a){if(arguments.length!=2){return false}this.remove_config_id(b);for(type in a){this.set_config_type(b,type,a[type])}return true};PaymentConfig.prototype.set_config=function(a){if(arguments.length!=1){return false}if(typeof a=="undefined"||a===null){return false}this.payment_config=fb_utils.cloneObject(a);return true};PaymentConfig.prototype.remove_config_type=function(b,a){if(arguments.length!=2){return false}if(typeof this.payment_config[b]=="undefined"||this.payment_config[b]===null){return false}if(typeof this.payment_config[b][a]=="undefined"||this.payment_config[b][a]===null){return false}return delete this.payment_config[b][a]};PaymentConfig.prototype.remove_config_id=function(a){if(arguments.length!=1){return false}return delete this.payment_config[a]};PaymentConfig.prototype.remove_config=function(){if(arguments.length!==0){return false}this.payment_config={};return true};PaymentConfig.prototype.generate_payment_options=function(d,c){if(arguments.length!=2){return false}if(typeof this.payment_config[d]=="undefined"||this.payment_config[d]===null){this.payment_config[d]={}}if(typeof this.payment_config[d]["quantity"]=="undefined"||this.payment_config[d]["quantity"]===null){this.payment_config[d]["quantity"]={}}if(typeof this.payment_config[d]["amount"]=="undefined"||this.payment_config[d]["amount"]===null){this.payment_config[d]["amount"]={}}for(var b=0;b<c.length;b++){if($(c[b]).val().length<=0){continue}var a=fb_utils.htmlDecode($(c[b]).val());if(typeof this.payment_config[d]["quantity"][a]=="undefined"||this.payment_config[d]["quantity"][a]===null){this.payment_config[d]["quantity"][a]="1"}if(typeof this.payment_config[d]["amount"][a]=="undefined"||this.payment_config[d]["amount"][a]===null){this.payment_config[d]["amount"][a]="0.01"}}return true};PaymentConfig.prototype.add_payment_option=function(b,a){if(arguments.length!=2){return false}if(typeof this.payment_config[b]=="undefined"||this.payment_config[b]===null){this.payment_config[b]={}}if(typeof this.payment_config[b]["type"]=="undefined"||this.payment_config[b]["type"]===null||this.payment_config[b]["type"]=="none"){return false}if(typeof this.payment_config[b]["quantity"]=="undefined"||this.payment_config[b]["quantity"]===null){this.payment_config[b]["quantity"]={}}if(typeof this.payment_config[b]["amount"]=="undefined"||this.payment_config[b]["amount"]===null){this.payment_config[b]["amount"]={}}if(typeof this.payment_config[b]["quantity"][a]=="undefined"||this.payment_config[b]["quantity"][a]===null){this.payment_config[b]["quantity"][a]="1"}if(typeof this.payment_config[b]["amount"][a]=="undefined"||this.payment_config[b]["amount"][a]===null){this.payment_config[b]["amount"][a]="0.01"}if(this.payment_config[b]["type"]=="quantity"||this.payment_config[b]["type"]=="cart_multiplier"){return this.payment_config[b]["quantity"][a]}else{if(this.payment_config[b]["type"]=="amount"){return this.payment_config[b]["amount"][a]}else{return""}}};PaymentConfig.prototype.remove_payment_option=function(b,a){if(arguments.length!=2){return false}if(typeof this.payment_config[b]=="undefined"||this.payment_config[b]===null){this.payment_config[b]={}}if(typeof this.payment_config[b]["quantity"]=="undefined"||this.payment_config[b]["quantity"]===null){this.payment_config[b]["quantity"]={}}if(typeof this.payment_config[b]["amount"]=="undefined"||this.payment_config[b]["amount"]===null){this.payment_config[b]["amount"]={}}delete this.payment_config[b]["quantity"][a];delete this.payment_config[b]["amount"][a];return true};PaymentConfig.prototype.set_payment_option=function(f,e,a,c){if(arguments.length!=4){return false}if(typeof this.payment_config[f]["type"]=="undefined"||this.payment_config[f]["type"]===null||this.payment_config[f]["type"]=="none"){return false}if(typeof this.payment_config[f]=="undefined"||this.payment_config[f]===null){this.payment_config[f]={}}if(typeof this.payment_config[f]["quantity"]=="undefined"||this.payment_config[f]["quantity"]===null){this.payment_config[f]["quantity"]={}}if(typeof this.payment_config[f]["amount"]=="undefined"||this.payment_config[f]["amount"]===null){this.payment_config[f]["amount"]={}}e=fb_utils.htmlDecode(e);a=fb_utils.htmlDecode(a);var b=this.payment_config[f]["quantity"][e];var d=this.payment_config[f]["amount"][e];delete this.payment_config[f]["quantity"][e];delete this.payment_config[f]["amount"][e];this.payment_config[f]["quantity"][a]=b;this.payment_config[f]["amount"][a]=d;if(this.payment_config[f]["type"]=="quantity"||this.payment_config[f]["type"]=="cart_multiplier"){this.payment_config[f]["quantity"][a]=c.toString()}else{if(this.payment_config[f]["type"]=="amount"){this.payment_config[f]["amount"][a]=c.toString()}}return true};PaymentConfig.prototype.get_payment_option=function(b,a){if(arguments.length!=2){return false}if(typeof this.payment_config[b]=="undefined"||this.payment_config[b]===null){this.payment_config[b]={}}if(typeof this.payment_config[b]["type"]=="undefined"||this.payment_config[b]["type"]===null||this.payment_config[b]["type"]=="none"){return false}if(typeof this.payment_config[b]["quantity"]=="undefined"||this.payment_config[b]["quantity"]===null){this.payment_config[b]["quantity"]={}}if(typeof this.payment_config[b]["amount"]=="undefined"||this.payment_config[b]["amount"]===null){this.payment_config[b]["amount"]={}}a=fb_utils.htmlDecode(a);if(this.payment_config[b]["type"]=="quantity"||this.payment_config[b]["type"]=="cart_multiplier"){return this.payment_config[b]["quantity"][a]}else{if(this.payment_config[b]["type"]=="amount"){return this.payment_config[b]["amount"][a]}else{return""}}};PaymentConfig.prototype.is_multiplier_defined=function(){var a=false;for(var b in this.payment_config){if(this.payment_config.hasOwnProperty(b)&&this.payment_config[b]["type"]=="cart_multiplier"){a=$("#"+b).attr("name");break}}return a};PaymentConfig.prototype.get_json=function(){if(arguments.length!==0){return""}return JSON.stringify(this.payment_config)};PaymentConfig.prototype.set_json=function(a){if(typeof a=="undefined"||a===null||typeof a!="string"){return false}this.payment_config=JSON.parse(a);return true};PaymentConfig.prototype.get_json_for_server=function(){var n={};for(var b in this.payment_config){if($("#"+b).length<=0){continue}if(this.payment_config.hasOwnProperty(b)){var h={};var a=$("#"+b).attr("name");if(a.substr(a.length-2,a.length)=="[]"){a=a.substr(0,a.length-2)}a=fb_utils.replaceString(a,"'","\\'");a=fb_utils.replaceString(a," ","_");a=fb_utils.replaceString(a,".","_");for(var j in this.payment_config[b]){if(j=="quantity"||j=="amount"){if((this.payment_config[b]["type"]=="quantity"&&j=="quantity")||(this.payment_config[b]["type"]=="amount"&&j=="amount")||(this.payment_config[b]["type"]=="cart_multiplier"&&j=="quantity")){h.options=fb_utils.cloneObject(this.payment_config[b][j]);if(j=="amount"){for(var l in h.options){h.options[l]=fb_utils.replaceString(h.options[l].toString(),".","")}}}continue}var e="";if(j=="price"){e=fb_utils.replaceString(this.payment_config[b][j],".","")}else{e=this.payment_config[b][j]}if(typeof(e)=="string"){h[j]=fb_utils.replaceString(e,"'","\\'")}else{h[j]=e}}n[a]=h}}var d=new Array();var k={};for(var f in n){var c="[name="+f+"]";var g=$(c,"#docContainer");if(!g.length){c="[name='"+f+"[]']:first"}g=$(c,"#docContainer");if(g.length){d.push({pos:g.position(),name:f})}else{d.push({pos:-1,name:f})}}d.sort(function(o,i){if(o.pos==-1){return 1}if(i.pos==-1){return -1}if(o.pos.top==0){return 1}if(i.pos.top==0){return -1}if(o.pos.top==i.pos.top){return o.pos.left-i.pos.left}else{return o.pos.top-i.pos.top}});for(var f in d){k[d[f].name.toLowerCase()]=n[d[f].name]}var m=JSON.stringify(k);return m};var pPaymentsConfig=new PaymentConfig();