var fb_container={olderbrother:"",itemSelected:null,sortableProps:{start:function(a,b){$(".column").addClass("current");$("#layout-center").css("cursor","-webkit-grabbing");fb_container.olderbrother="";if($(b.item[0]).prev()[0]){fb_container.olderbrother=$(b.item[0]).prev()[0].id}if($(b.item).hasClass("fb-item")){$(".ui-placeholder-bis").width($(b.item[0]).width())}},opacity:0.5,cursor:"copy",accept:".drag_tool",connectWith:".column",placeholder:"ui-placeholder",forcePlaceholderSize:"true",stop:function(c,d){fb_editor.backgroundActive();$(".column").removeClass("current");$("#layout-center").css("cursor","auto");var e="";if($(d.item[0]).prev().get(0)){e=$(d.item[0]).prev().get(0).id}if((e!=fb_container.olderbrother)&&!fb_undo.isInsertAction){var a={};a.type_operation="move";a.markup=fb_utils.getItemHtml(d.item[0]);a.id_father=this.id;a.id_element=d.item[0].id;a.id_previous_brother=fb_container.olderbrother;a.id_newbrother=e;var b=fb_editor.JSONParser.stringify(a);appVar.pushUndo_(b)}$(d.item[0]).css("filter","");$(d.item[0]).css("zoom","");$(d.item[0]).css("z-index","")}},init:function(){if($("#section1","#docContainer").length>0){return}$("#docContainer").append(fb_utils.createDiv("section1","section",null,fb_utils.createDiv("column1","column",null,null)));$("#docContainer").append(fb_utils.createDiv("fb-captcha_control","fb-captcha fb-item-alignment-center","display:none; cursor: default;",fb_utils.createImg(null,null,null,"editordata/images/recaptchawhite.png")));$("#docContainer").append(fb_utils.createDiv("fb-submit-button-div","fb-item-alignment-left fb-footer","min-height:1px;",'<input type="submit" value="Submit" class="fb-button-special" id="fb-submit-button">'));$(".column").addClass("img_background");if(appVar.platform()!="win"){$(".img_background").attr("data-content",_("Get started by clicking or dragging elements here"))}else{$(".img_background").html(_('<span id="fb_placeholder_text" style="width:420px; margin-left:-180px; position:absolute; left:50%; top:'+($(".img_background").position().top+40)+'px;">Get started by clicking or dragging elements here</span>'))}$("#docContainer").prepend(fb_utils.createDiv("fb-form-header1","fb-form-header","",'<a id="fb-link-logo1" class="fb-link-logo" href="" target="_blank"><img alt="'+_("Alternative text")+'" title="'+_("Alternative text")+'" id="fb-logo1" class="fb-logo" src="common/images/image_default.png" style="display:none"/></a>'));$("#fb-form-header1").css("min-height","20px");var a=document.getElementById("docContainer");fb_toolbox.assignDefaultValues(a,"form");var b=document.getElementById("fb-submit-button");fb_toolbox.assignDefaultValues(b,"submit");pValidationConfig.set_config_subtype("fb-submit-button","hover","background-image","");$(b).attr("data-regular",$(b).css("background-image"));$("#column1").sortable(fb_container.sortableProps);fb_editor.notBackgroundActive();$("#docContainer input, #docContainer select").live("mousedown",function(c){c.preventDefault();return false})},initLoaded:function(){$(".fb-item").removeClass("selected-object");$("#fb-submit-button-div").removeClass("selected-object");fb_container.legacyOldProjects();var g=$("#docContainer").children();for(var h=0;h<g.length;h++){var c=$(g[h]).children();for(var f=0;f<c.length;f++){if($(c[f]).hasClass("column")){$(c[f]).sortable(fb_container.sortableProps);var b=$(c[f]).children();for(var d=0;d<b.length;d++){$(b[d]).mousedown(fb_editor.itemToSelectable)}}}}$("#docContainer a").live("click",function(i){i.preventDefault();return false});$("#fb-submit-button-div").mousedown(fb_editor.itemToSelectable);var o=$("#fb-submit-button-div").children();for(var h=0;h<o.length;h++){$(o[h]).mousedown(fb_editor.itemToSelectable)}$("#fb-form-header1").mousedown(fb_editor.itemToSelectable);var l=$("#fb-form-header1").children();for(var h=0;h<l.length;h++){$(l[h]).mousedown(fb_editor.itemToSelectable)}$("#fb-captcha_control").mousedown(fb_editor.itemToSelectable);$("#docContainer").click(function(){if(fb_container.itemSelected){fb_container.itemSelected.trigger("mousedown")}});fb_container.itemSelected=null;fb_editor.notBackgroundActive();fb_panel.clear();$("#control_properties_set").append('<p id="properties_placeholder">'+_("Select an element and its editable properties will appear here.")+"</p>");fb_editor.initPlaceholderFallback();var p=$("#fb-captcha_control img").attr("src");var e=p.search("editordata/images");var m=p.substr(0,e);p=p.replace(m,"");$("#fb-captcha_control img").attr("src",p);for(var a in pValidationConfig.validation_config){if(pValidationConfig.validation_config.hasOwnProperty(a)){for(var n in pValidationConfig.validation_config[a]){if(n=="hover"){fb_panel.applyBackgroundHover(a);break}}}}},legacyOldProjects:function(){if(!$("#fb-form-header1").length){$("#docContainer").prepend(fb_utils.createDiv("fb-form-header1","fb-form-header","",'<a id="fb-link-logo1" class="fb-link-logo" href="" target="_blank"><img alt="'+_("Alternative text")+'" title="'+_("Alternative text")+'" id="fb-logo1" class="fb-logo" src="common/images/image_default.png" style="display:none"/></a>'))}if(!$("#fb-form-header1 img").attr("src").length){$("#fb-form-header1 img").attr("src","common/images/image_default.png")}if(!$("#fb-submit-button-div").hasClass("fb-footer")){$("#fb-submit-button-div").addClass("fb-footer")}if(!$("#fb-submit-button-div").css("min-height")==0){$("#fb-submit-button-div").css("min-height","1px")}if($("#fb-submit-button").val()==""){$("#fb-submit-button").val(" ")}$("#fb-submit-button").attr("data-regular",$("#fb-submit-button").css("background-image"));$("#docContainer").css("-webkit-transform","");$("#docContainer").removeClass("fb-two-column");$.each($(".fb-item .fb-checkbox, .fb-item .fb-radio","#docContainer"),function(g,f){var e=$(f).parent();if(e.hasClass("fb-one-column")||e.hasClass("fb-two-column")||e.hasClass("fb-three-column")){return}else{e.addClass("fb-side-by-side")}});$.each($("select option","#docContainer"),function(f,e){if(!pValidationConfig.get_config_value($(e).parent().get(0).id,"contactList")&&$(e).val().length&&$(e).val()!=$(e).text()){$(e).val($(e).text())}});$.each($(".fb-item .fb-radio","#docContainer"),function(f,e){if(pValidationConfig.get_config_value($("input",e).get(0).id,"required")){$("input",e).attr("required",true);$.each($("input",e),function(g,h){$(h).removeAttr("checked")})}});$.each($(".fb-hint","#docContainer"),function(h,g){var e=$("*",$(g).parent());for(var f=0;f<e.length;f++){if($(e[f]).attr("data-hint")!=undefined){if($(e[f]).attr("data-hint").length==0){$(g).remove()}else{if(($(e[f]).attr("data-hint").search("\n")==-1)&&($(g).html().search("<br>")!=-1||$(g).html().search("<BR>")!=-1)){var j=$(g).html();j=fb_utils.replaceString(j,"<br>","\n");j=fb_utils.replaceString(j,"<BR>","\n");$(e[f]).attr("data-hint",j)}}break}}});var d=pValidationConfig.get_config();$.each(d,function(f,e){if("digits" in e){delete e.digits;e.decimals=0}});$.each(d,function(g,f){if("checkbox" in f&&"minlength" in f){if(f.checkbox){var e=f.minlength;delete f.minlength;f.minlength_checkbox=e}}});pValidationConfig.set_config(d);var c=pPaymentsConfig.get_config();$.each(c,function(g,f){if("type" in f&&f.type=="donation"){f.type="amount"}if("donation" in f){var e=fb_utils.cloneObject(f.donation);delete f.donation;f.amount=e}});pPaymentsConfig.set_config(c);$("#fb-captcha_control").css("text-align","");if(!$("#fb-captcha_control").hasClass("fb-item-alignment-center")&&!$("#fb-captcha_control").hasClass("fb-item-alignment-left")&&!$("#fb-captcha_control").hasClass("fb-item-alignment-right")){$("#fb-captcha_control").addClass("fb-item-alignment-center")}$("#docContainer .fb-image img").each(function(){var f=$(this).attr("style");if(f==undefined||(f!=undefined&&f.search("100%")==-1)){var e=$(this).parent().parent().css("width");$(this).css("width","100%");$(this).parent().parent().css("max-width",e);$(this).parent().parent().css("width","");$(this).parent().parent().css("height","")}});var b=$("#fb-logo1").attr("style");if(b==undefined||(b!=undefined&&b.search("100%")==-1)){var a=$("#fb-logo1").css("width");$("#fb-logo1").css("width","100%");$("#fb-logo1").css("height","");$("#fb-logo1").parent().css("max-width",a)}}};