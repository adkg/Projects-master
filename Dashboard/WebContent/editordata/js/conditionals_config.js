var fb_conditionals={cond_rule_name:"conditionalRules",set_rules:function(a){pValidationConfig.set_config_id(this.cond_rule_name,a)},get_rules:function(){var a={};a=pValidationConfig.get_config_id(this.cond_rule_name);return a},get_rules_for_server:function(){var e=this.get_rules();var d={};for(var f in e){var c=$("input, select, textarea","#"+f);for(var b=0;b<c.length;b++){var a=$(c[b]).attr("name");if(a!=undefined&&a.indexOf("]")!=-1){a=a.substr(0,a.length-2)}d[a.toLowerCase()]=this._lowerCaseRules(e[f])}}return d},_lowerCaseRules:function(b){for(var a in b){if(!b.hasOwnProperty(a)){continue}if(a=="name"){b[a]=b[a].toLowerCase();break}if(a!="operator"&&a!="value"&&a!="name"){b[a]=this._lowerCaseRules(b[a])}}return b},set_rule_string:function(a,b){var c=this.get_rules();c[a]=fb_editor.JSONParser.parse(b);this.set_rules(c)},get_rule_string:function(a){var b=this.get_rules();if(!b.hasOwnProperty(a)){return""}return this._performGetRuleString(b[a])},remove_rule:function(a){var b=this.get_rules();if(!b.hasOwnProperty(a)){return}delete b[a];this.set_rules(b)},change_name:function(b,a){var c=this.get_rules();c=this._performChangeName(b,a,c);this.set_rules(c)},change_value:function(b,c,a){var d=this.get_rules();d=this._performChangeValue(b,c,a,d);this.set_rules(d)},duplicate_element:function(c,a){var b=this.get_rules();if(b.hasOwnProperty(c)){b[a]=b[c]}this.set_rules(b)},delete_name:function(a){var b=this.get_rules();b=this._performDeleteName(a,b);this.set_rules(b)},delete_value:function(a,b){var c=this.get_rules();c=this._performDeleteValue(a,b,c);this.set_rules(c)},_performGetRuleString:function(a){for(var b in a){if(!a.hasOwnProperty(b)){continue}switch(b){case"set":return("( "+this._performGetRuleString(a[b]["rule1"])+" "+a[b]["operator"]+" "+this._performGetRuleString(a[b]["rule2"])+" )");break;case"element":return("( ["+a[b]["name"]+"] "+a[b]["operator"]+' "'+fb_utils.replaceString(a[b]["value"],'"','\\"')+'" )');break;case"name":case"value":case"operator":default:return a[b]}}},_performChangeName:function(c,a,d){for(var b in d){if(!d.hasOwnProperty(b)){continue}if(b=="name"&&d[b]==a){d[b]=c;break}if(b!="operator"&&b!="value"&&b!="name"){d[b]=this._performChangeName(c,a,d[b])}}return d},_performChangeValue:function(b,d,a,e){for(var c in e){if(!e.hasOwnProperty(c)){continue}if(c=="value"&&e.name==b&&e[c]==a){e[c]=d;break}if(c!="operator"&&c!="value"&&c!="name"){e[c]=this._performChangeValue(b,d,a,e[c])}}return e},_performDeleteName:function(a,c){for(var b in c){if(!c.hasOwnProperty(b)){continue}if(b=="set"){if(c[b]["rule1"].hasOwnProperty("element")&&c[b]["rule1"]["element"]["name"]==a){return c[b]["rule2"]}if(c[b]["rule2"].hasOwnProperty("element")&&c[b]["rule2"]["element"]["name"]==a){return c[b]["rule1"]}}if(c[b].hasOwnProperty("element")&&c[b]["element"]["name"]==a){delete c[b];continue}if(b!="operator"&&b!="value"&&b!="name"){c[b]=this._performDeleteName(a,c[b])}}return c},_performDeleteValue:function(a,c,d){for(var b in d){if(!d.hasOwnProperty(b)){continue}if(b=="set"){if(d[b]["rule1"].hasOwnProperty("element")&&d[b]["rule1"]["element"]["name"]==a&&d[b]["rule1"]["element"]["value"]==c){return d[b]["rule2"]}if(d[b]["rule2"].hasOwnProperty("element")&&d[b]["rule2"]["element"]["name"]==a&&d[b]["rule2"]["element"]["value"]==c){return d[b]["rule1"]}}if(d[b].hasOwnProperty("element")&&d[b]["element"]["name"]==a&&d[b]["element"]["value"]==c){delete d[b];continue}if(b!="operator"&&b!="value"&&b!="name"){d[b]=this._performDeleteValue(a,c,d[b])}}return d}};